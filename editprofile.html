<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .bg-tint-black {
            background-color: rgba(0, 0, 0, 0.9);
        }
    </style>
</head>

<body class="bg-gray-900 flex h-screen">
    <div class="w-full flex justify-center items-center">
        <div class="w-full max-w-md bg-white p-4 rounded shadow-md"> <!-- Reduced padding -->
            <h1 class="text-2xl font-semibold mb-2">Edit Profile</h1> <!-- Reduced margin -->

            <div class="flex justify-center items-center mb-2">
                <div class="w-28 h-28 bg-gray-500 rounded-full flex justify-center items-center" id="profilePicture">
                    <img id="profileImage" class="w-full h-full rounded-full object-contain cursor-pointer" src="" alt="" onclick="openImageModal(this.src)">
                </div>
            </div>
            
            <!-- Modal -->
            <div id="imageModal" class="fixed top-0 left-0 z-50 w-full h-full flex justify-center items-center bg-black bg-opacity-50 hidden text-white">
                <div class="bg-white rounded-lg overflow-hidden relative max-w-screen-md max-h-screen-md" style="max-height: 95vh;">
                    <img id="modalImage" src="" alt="Modal Image" class="w-full h-full object-contain" />
                </div>
                <button onclick="closeImageModal()" class="absolute top-0 right-0 p-3 rounded-full text-white">&#10005;</button>
            </div>
            
            <div class="mt-1">
                <label for="editImage" class="block text-sm font-medium text-gray-700">Change Profile Picture:</label>
                <input type="file" id="editImage" name="editImage" accept="image/*" onchange="previewProfileImage();" class="mt-1 mb-2 bg-gray-300 text-black w-full rounded focus:outline-none focus:ring-2 focus:ring-red-500" />
            </div>
            
            <!-- Reduced margin for input fields -->
            <div class="mt-1">
                <label for="firstname" class="block text-sm font-medium text-gray-700">First Name:</label>
                <input type="text" id="firstname"
                    class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md px-3 py-1">
                <span id="firstnameGuidance" class="text-sm text-gray-500">Letters only</span>
                <!-- Span for first name guidance -->
            </div>
            <div class="mt-1">
                <label for="lastname" class="block text-sm font-medium text-gray-700">Last Name:</label>
                <input type="text" id="lastname"
                    class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md px-3 py-1">
                <span id="lastnameGuidance" class="text-sm text-gray-500">Letters only</span>
                <!-- Span for last name guidance -->
            </div>

            <div class="mt-1">
                <label for="phonenumber" class="block text-sm font-medium text-gray-700">Phone Number:</label>
                <input type="tel" id="phonenumber" maxlength="11"
                    class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md px-3 py-1">
                <span id="phonenumberFeedback" class="text-sm text-red-500"></span>
                <!-- Span for phone number validation feedback -->
            </div>

            <div class="mt-1">
                <label for="email" class="block text-sm font-medium text-gray-700">Email:</label>
                <input type="email" id="email"
                    class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md px-3 py-1">
                <span id="emailFeedback" class="text-sm text-red-500"></span>
                <!-- Span for email validation feedback -->
            </div>

            <div class="mt-1">
                <label for="username" class="block text-sm font-medium text-gray-700">Username:</label>
                <input type="text" id="username"
                    class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md px-3 py-1">
                <span id="usernameAvailability" class="text-sm text-gray-500"></span>
                <!-- Span for username availability -->
            </div>


            <div class="mt-2 flex justify-end"> <!-- Adjusted margin -->
                <button id="saveButton"
                    class="w-1/3 bg-yellow-500 text-white py-2 rounded-md font-semibold cursor-not-allowed "
                    disabled>Save Changes</button> <!-- Adjusted width -->
            </div>


            <h1 class="text-2xl font-semibold mt-2 mb-1">Change Password</h1> <!-- Reduced margin -->

            <!-- Reduced margin for password fields -->
            <div class="mt-1">
                <label for="currentpassword" class="block text-sm font-medium text-gray-700">Current Password:</label>
                <div class="relative mt-1">
                    <input type="password" id="currentpassword" class="focus:ring-indigo-500 focus:border-indigo-500 pr-10 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md px-3 py-1">
                    <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 focus:outline-none togglePassword">
                        <img src="elements/eyepassword.svg" alt="Toggle Password Visibility" class="h-5 w-5">
                    </button>
                </div>
                <span id="currentpasswordFeedback" class="text-sm text-gray-500"></span>
                <!-- Span for current password validation feedback -->
            </div>
            
            <!-- Reduced margin for password fields -->
            <div class="mt-1">
                <label for="newpassword" class="block text-sm font-medium text-gray-700">New Password:</label>
                <div class="relative mt-1">
                    <input type="password" id="newpassword" class="focus:ring-indigo-500 focus:border-indigo-500 pr-10 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md px-3 py-1">
                    <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 focus:outline-none togglePassword">
                        <img src="elements/eyepassword.svg" alt="Toggle Password Visibility" class="h-5 w-5">
                    </button>
                </div>
                <span id="newpasswordFeedback" class="text-sm text-gray-500"></span>
                <!-- Span for new password validation feedback -->
            </div>
            
            
            <!-- Reduced margin for password fields -->
            <div class="mt-1">
                <label for="confirmnewpassword" class="block text-sm font-medium text-gray-700">Confirm New Password:</label>
                <div class="relative mt-1">
                    <input type="password" id="confirmnewpassword" class="focus:ring-indigo-500 focus:border-indigo-500 pr-10 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md px-3 py-1">
                    <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 focus:outline-none togglePassword">
                        <img src="elements/eyepassword.svg" alt="Toggle Password Visibility" class="h-5 w-5">
                    </button>
                </div>
                <span id="confirmnewpasswordFeedback" class="text-sm text-gray-500"></span>
                <!-- Span for confirm new password validation feedback -->
            </div>
            

            <div class="mt-2 flex justify-end"> <!-- Adjusted margin -->
                <button id="savePasswordButton" class="w-1/3 bg-yellow-500 text-white py-2 rounded-md font-semibold cursor-not-allowed "
                disabled>Save Password</button> <!-- Adjusted width -->
            </div>


        </div>
    </div>
    <!-- Back button -->
    <button onclick="goBack()"
        class="fixed bottom-8 left-8 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded">
        
        <div class="transform text-white text-2xl rotate-180 inline-block">âž¤</div>

    </button>

    <script>

// Event listener for save password button
document.getElementById('savePasswordButton').addEventListener('click', function () {
    // Collect new password data
    const newPassword = document.getElementById('newpassword').value.trim();

    // Send AJAX request to change password
    fetch('log/editchangepassword.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: 'newPassword=' + encodeURIComponent(newPassword)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('Password changed successfully!');
        } else {
            alert('Error changing password: ' + data.error);
        }
    })
    .catch(error => console.error('Error:', error));
});

function previewProfileImage() {
    const file = document.getElementById('editImage').files[0];
    const preview = document.getElementById('profileImage');

    if (file) {
        const reader = new FileReader();

        reader.onload = function(e) {
            preview.src = e.target.result; // Update the profile image src
        };

        reader.readAsDataURL(file);
    }
}


// Function to check password validity and enable/disable save password button accordingly
function checkPasswordValidity() {
    // Get feedback elements
    const currentPasswordFeedback = document.getElementById('currentpasswordFeedback').textContent.trim();
    const newPasswordFeedback = document.getElementById('newpasswordFeedback').textContent.trim();
    const confirmNewPasswordFeedback = document.getElementById('confirmnewpasswordFeedback').textContent.trim();

    // Log feedback messages for debugging
    console.log('Current Password Feedback:', currentPasswordFeedback);
    console.log('New Password Feedback:', newPasswordFeedback);
    console.log('Confirm New Password Feedback:', confirmNewPasswordFeedback);

    // Check if all conditions are met
    const currentPasswordMatches = currentPasswordFeedback === 'Current password matches.';
    const newPasswordComplexity = newPasswordFeedback === 'Password meets complexity requirements and does not match current password.';
    const passwordsMatch = confirmNewPasswordFeedback === 'Passwords match.';

    // Enable save password button if all conditions are met
    const savePasswordButton = document.getElementById('savePasswordButton');
    if (currentPasswordMatches && newPasswordComplexity && passwordsMatch) {
        savePasswordButton.disabled = false;
        savePasswordButton.classList.remove('bg-yellow-500', 'cursor-not-allowed');
        savePasswordButton.classList.add('bg-blue-500', 'cursor-pointer');
    } else {
        // Disable save password button if any condition is not met
        savePasswordButton.disabled = true;
        savePasswordButton.classList.remove('bg-blue-500', 'cursor-pointer');
        savePasswordButton.classList.add('bg-yellow-500', 'cursor-not-allowed');
    }
}


// Event listener for current password input
document.getElementById('currentpassword').addEventListener('input', function () {
    checkPasswordValidity(); // Call the function to update save button validity
});

// Event listener for new password input
document.getElementById('newpassword').addEventListener('input', function () {
    checkPasswordValidity(); // Call the function to update save button validity
});

// Event listener for confirm new password input
document.getElementById('confirmnewpassword').addEventListener('input', function () {
    checkPasswordValidity(); // Call the function to update save button validity
});




document.getElementById('confirmnewpassword').addEventListener('input', function () {
    var confirmNewPasswordInput = this.value;
    var confirmNewPasswordFeedback = document.getElementById('confirmnewpasswordFeedback');
    var newPasswordInput = document.getElementById('newpassword').value;

    // Check if the new password meets the complexity requirements
    var isComplexEnough = checkPasswordComplexity(newPasswordInput);

    // Send AJAX request to check if the new password matches the current password
    fetch('log/checkcurrentpassword.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: 'currentPassword=' + encodeURIComponent(newPasswordInput)
    })
    .then(response => response.json())
    .then(result => {
        if (!result.match && isComplexEnough) {
            // If new password meets complexity requirements and doesn't match current password
            confirmNewPasswordFeedback.textContent = 'Passwords match.';
        } else {
            // Clear the feedback if the conditions are not met
            confirmNewPasswordFeedback.textContent = '';
        }
    })
    .catch(error => {
        console.error('Error:', error);
        confirmNewPasswordFeedback.textContent = 'Error checking new password.';
    });
});




// Function to check if the new password meets complexity requirements
function checkPasswordComplexity(newPassword) {
    // Regular expressions to check for password complexity requirements
    var lowercaseRegex = /[a-z]/;
    var uppercaseRegex = /[A-Z]/;
    var specialCharRegex = /[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/;
    var numberRegex = /[0-9]/;

    // Check if the new password meets the complexity requirements
    var containsLowercase = lowercaseRegex.test(newPassword);
    var containsUppercase = uppercaseRegex.test(newPassword);
    var containsSpecialChar = specialCharRegex.test(newPassword);
    var containsNumber = numberRegex.test(newPassword);

    // Return true if all complexity requirements are met, false otherwise
    return containsLowercase && containsUppercase && containsSpecialChar && containsNumber;
}

document.getElementById('newpassword').addEventListener('input', function () {
    var newPasswordInput = this.value;
    var newPasswordFeedback = document.getElementById('newpasswordFeedback');

    // Check if the new password meets the complexity requirements
    var isComplexEnough = checkPasswordComplexity(newPasswordInput);

    // Check if the new password matches the current password
    var currentPassword = document.getElementById('currentpassword').value.trim();

    // Send AJAX request to check if the new password matches the current password
    fetch('log/checkcurrentpassword.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: 'currentPassword=' + encodeURIComponent(newPasswordInput)
    })
    .then(response => response.json())
    .then(result => {
        if (!result.match && isComplexEnough) {
            newPasswordFeedback.textContent = 'Password meets complexity requirements and does not match current password.';
        } else if (result.match) {
            newPasswordFeedback.textContent = 'Password cannot match the current password.';
        } else {
            newPasswordFeedback.textContent = 'Password must contain at least one lowercase letter, one uppercase letter, one special character, and a number.';
        }
    })
    .catch(error => {
        console.error('Error:', error);
        newPasswordFeedback.textContent = 'Error checking new password.';
    });
});



document.getElementById('currentpassword').addEventListener('input', function () {
    var currentPasswordInput = this.value;
    var currentPasswordFeedback = document.getElementById('currentpasswordFeedback');

    // Send AJAX request to check if the current password matches the user's password
    fetch('log/checkcurrentpassword.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: 'currentPassword=' + encodeURIComponent(currentPasswordInput)
    })
    .then(response => response.json())
    .then(result => {
        if (result.match) {
            currentPasswordFeedback.textContent = 'Current password matches.';
        } else {
            currentPasswordFeedback.textContent = 'Current password does not match.';
        }
    })
    .catch(error => {
        console.error('Error:', error);
        currentPasswordFeedback.textContent = 'Error checking current password.';
    });
});



        function openImageModal(imagePath) {
            // Show modal
            document.getElementById('imageModal').classList.remove('hidden');
            // Set image source
            document.getElementById('modalImage').src = imagePath;
        }

        function closeImageModal() {
            document.getElementById('imageModal').classList.add('hidden');
        }


        // Event listener for email input
        document.getElementById('email').addEventListener('input', function () {
            var emailInput = this.value;
            var emailFeedback = document.getElementById('emailFeedback');

            // Regular expression to validate email format (ending with @gmail.com or @yahoo.com)
            var emailRegex = /^[a-zA-Z0-9._%+-]+@(gmail\.com|yahoo\.com)$/;

            // Check if the email input matches the required format
            if (!emailRegex.test(emailInput)) {
                emailFeedback.textContent = 'Please enter a valid email address (gmail.com or yahoo.com only)';
            } else {
                emailFeedback.textContent = ''; // Clear the error message if input is valid
            }
        });


        // Event listener for phone number input
        document.getElementById('phonenumber').addEventListener('input', function () {
            var phoneNumberInput = this.value;
            var phoneNumberFeedback = document.getElementById('phonenumberFeedback');

            // Check if the phone number input contains non-numeric characters or exceeds 11 digits
            if (!/^\d{0,11}$/.test(phoneNumberInput)) {
                phoneNumberFeedback.textContent = 'Please enter a valid phone number (up to 11 digits)';
            } else {
                phoneNumberFeedback.textContent = ''; // Clear the error message if input is valid
            }
        });



        // Event listener for first name input
        document.getElementById('firstname').addEventListener('input', function () {
            var firstNameInput = this.value;
            var firstNameGuidance = document.getElementById('firstnameGuidance');

            // Check if non-letter or non-space characters are present in the first name
            if (!/^[a-zA-Z\s]*$/.test(firstNameInput)) {
                firstNameGuidance.textContent = 'Letters and spaces only';
            } else {
                firstNameGuidance.textContent = ''; // Clear the guidance message if input is valid
            }
        });

        // Event listener for last name input
        document.getElementById('lastname').addEventListener('input', function () {
            var lastNameInput = this.value;
            var lastNameGuidance = document.getElementById('lastnameGuidance');

            // Check if non-letter or non-space characters are present in the last name
            if (!/^[a-zA-Z\s]*$/.test(lastNameInput)) {
                lastNameGuidance.textContent = 'Letters and spaces only';
            } else {
                lastNameGuidance.textContent = ''; // Clear the guidance message if input is valid
            }
        });



        document.getElementById('username').addEventListener('input', function () {
            var usernameInput = this.value.trim(); // Trim whitespace from input
            var usernameFeedback = document.getElementById('usernameAvailability');

            // Check if the username input is empty
            if (usernameInput === '') {
                usernameFeedback.textContent = 'Please enter a username.';
                return; // Exit function early
            }

            // Compare with the current username
            var currentUsername = usernamecurrent.trim(); // Assuming `usernamecurrent` contains the current username
            if (usernameInput === currentUsername) {
                usernameFeedback.textContent = ''; // Clear the feedback if the input matches the current username
                return; // Exit function early
            }

            // Send AJAX request to check the availability of the username
            fetch('log/checkusername.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'username=' + encodeURIComponent(usernameInput)
            })
                .then(response => response.text())
                .then(result => {
                    if (result.trim() === 'exists') {
                        usernameFeedback.textContent = 'Username already exists.';
                    } else if (result.trim() === 'notexists') {
                        usernameFeedback.textContent = 'Username available.';
                    } else {
                        usernameFeedback.textContent = 'Error checking username availability.';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    usernameFeedback.textContent = 'Error checking username availability.';
                });
        });



        // Add event listener to toggle password visibility
        const togglePasswordButtons = document.querySelectorAll('.togglePassword');
        togglePasswordButtons.forEach(button => {
            button.addEventListener('click', function () {
                const passwordInput = this.previousElementSibling;
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                // Change button icon based on password visibility
                this.querySelector('img').src = type === 'password' ? 'elements/eyepassword.svg' : 'elements/eyeopened.svg';
            });
        });



        let firstnamecurrent;
        let lastnamecurrent;
        let phonenumbercurrent;
        let emailcurrent;
        let usernamecurrent;
        let imagecurrent;

        document.addEventListener("DOMContentLoaded", function () {
            function fetchData() {
                fetch('editprofile/editprofile.php')
                    .then(response => response.json())
                    .then(data => {
                        // Populate text fields with the retrieved data
                        document.getElementById('firstname').value = data.userFirstName;
                        document.getElementById('lastname').value = data.userLastName;
                        document.getElementById('phonenumber').value = data.userPhoneNumber;
                        document.getElementById('email').value = data.userEmail;
                        document.getElementById('username').value = data.userUsername;

                        usernamecurrent = data.userUsername;
                        firstnamecurrent = data.userFirstName;
                        lastnamecurrent = data.userLastName;
                        phonenumbercurrent = data.userPhoneNumber;
                        emailcurrent = data.userEmail;
                        imagecurrent = data.userProfileImage;


                        // Populate profile picture with retrieved image path or default
                        var profileImagePath = data.userProfileImage || 'profilepics/defaultphotobytaskmagnet.jpg';
                        document.getElementById('profileImage').src = profileImagePath;

                        // Open image modal on profile picture click
                        document.getElementById('profileImage').addEventListener('click', function () {
                            openImageModal(profileImagePath);
                        });
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        // Set default image on error
                        document.getElementById('profileImage').src = 'profilepics/defaultphotobytaskmagnet.jpg';
                    });
            }

            // Initial data fetch
            fetchData();

            // Add event listener for save button
            // Event listeners for input fields
            document.getElementById('firstname').addEventListener('input', checkSaveButtonValidity);
            document.getElementById('lastname').addEventListener('input', checkSaveButtonValidity);
            document.getElementById('phonenumber').addEventListener('input', checkSaveButtonValidity);
            document.getElementById('email').addEventListener('input', checkSaveButtonValidity);
            document.getElementById('username').addEventListener('input', checkSaveButtonValidity);

            // Event listener for save button
            document.getElementById('saveButton').addEventListener('click', function () {
                // Collect updated data
                const updatedData = {
                    userFirstName: document.getElementById('firstname').value,
                    userLastName: document.getElementById('lastname').value,
                    userPhoneNumber: document.getElementById('phonenumber').value,
                    userEmail: document.getElementById('email').value,
                    userUsername: document.getElementById('username').value,
                    editImage: document.getElementById('editImage').files[0], // Get the selected file
                    usernamecurrent: usernamecurrent // Add usernamecurrent to the updatedData
                };

                // Send updated data to the server using AJAX
                const formData = new FormData();
                formData.append('userFirstName', updatedData.userFirstName);
                formData.append('userLastName', updatedData.userLastName);
                formData.append('userPhoneNumber', updatedData.userPhoneNumber);
                formData.append('userEmail', updatedData.userEmail);
                formData.append('userUsername', updatedData.userUsername);
                formData.append('editImage', updatedData.editImage);
                formData.append('usernamecurrent', updatedData.usernamecurrent); // Append usernamecurrent to the FormData object

                // AJAX request
                fetch('editprofile/editreviseprofile.php', {
                    method: 'POST',
                    body: formData
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert('Profile updated successfully!');
                            fetchData();
                        } else {
                            alert('Error updating profile: ' + data.error);
                        }
                    })
                    .catch(error => console.error('Error:', error));
            });

        });


// Add an event listener to the editImage input field
document.getElementById('editImage').addEventListener('change', function() {
    // Call the function to check save button validity when the image changes
    checkSaveButtonValidity();
});

// Function to check save button validity
function checkSaveButtonValidity() {
    // Get current input values
    const currentFirstName = document.getElementById('firstname').value.trim();
    const currentLastName = document.getElementById('lastname').value.trim();
    const currentPhoneNumber = document.getElementById('phonenumber').value.trim();
    const currentEmail = document.getElementById('email').value.trim();
    const currentUsername = document.getElementById('username').value.trim();
    const currentImage = document.getElementById('editImage').files[0]; // Get the current image file

    // Get feedback elements
    const firstNameFeedback = document.getElementById('firstnameGuidance').textContent.trim();
    const lastNameFeedback = document.getElementById('lastnameGuidance').textContent.trim();
    const phoneNumberFeedback = document.getElementById('phonenumberFeedback').textContent.trim();
    const emailFeedback = document.getElementById('emailFeedback').textContent.trim();
    const usernameFeedback = document.getElementById('usernameAvailability').textContent.trim();

    // Compare with original values and feedback
    const firstNameChanged = currentFirstName !== firstnamecurrent;
    const lastNameChanged = currentLastName !== lastnamecurrent;
    const phoneNumberChanged = currentPhoneNumber !== phonenumbercurrent;
    const emailChanged = currentEmail !== emailcurrent;
    const usernameChanged = currentUsername !== usernamecurrent;
    const imageChanged = currentImage !== imagecurrent; // Compare the current image with the previous one

    // Check if any feedback is present
    const feedbackPresent = firstNameFeedback || lastNameFeedback || phoneNumberFeedback || emailFeedback || usernameFeedback;

    // Enable save button if changes have been made to any field and no feedback is present for that field
    const saveButton = document.getElementById('saveButton');
    if ((firstNameChanged && !firstNameFeedback) || (lastNameChanged && !lastNameFeedback) || (phoneNumberChanged && !phoneNumberFeedback) || (emailChanged && !emailFeedback) || (usernameChanged && !usernameFeedback) || imageChanged) {
        saveButton.disabled = false;
        saveButton.classList.remove('bg-yellow-500', 'cursor-not-allowed');
        saveButton.classList.add('bg-blue-500', 'cursor-pointer');
    } else {
        // Disable save button if no changes or feedback is present
        saveButton.disabled = true;
        saveButton.classList.remove('bg-blue-500', 'cursor-pointer');
        saveButton.classList.add('bg-yellow-500', 'cursor-not-allowed');
    }
}





        function goBack() {
            window.history.back();
        }
    </script>

</body>

</html>